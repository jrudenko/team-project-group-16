function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},r=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),r.forEach((function(e){_defineProperty(t,e,i[e])}))}return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}var ItcSlider=function(){"use strict";function t(e,i){_classCallCheck(this,t),this._el="string"==typeof e?document.querySelector(e):e,this._elWrapper=this._el.querySelector(t.SEL_WRAPPER),this._elItems=this._el.querySelector(t.SEL_ITEMS),this._elsItem=this._el.querySelectorAll(t.SEL_ITEM),this._elsIndicator=this._el.querySelectorAll(t.SEL_INDICATOR),this._btnPrev=this._el.querySelector(t.SEL_PREV),this._btnNext=this._el.querySelector(t.SEL_NEXT),this._exOrderMin=0,this._exOrderMax=0,this._exItemMin=null,this._exItemMax=null,this._exTranslateMin=0,this._exTranslateMax=0,this._direction="next",this._intervalId=null,this._isSwiping=!1,this._swipeX=0,this._config=_objectSpread({loop:!0,autoplay:!1,interval:5e3,refresh:!0,swipe:!0},i),this._setInitialValues(),this._addEventListener()}return _createClass(t,[{key:"_addEventListener",value:function(){var e=this;if(this._el.addEventListener("click",(function(i){if(e._autoplay("stop"),i.target.classList.contains(t.CLASS_CONTROL))i.preventDefault(),e._direction=i.target.dataset.slide,e._move();else if(i.target.dataset.slideTo){var r=parseInt(i.target.dataset.slideTo,10);e._moveTo(r)}e._config.loop&&e._autoplay()})),this._el.addEventListener("mouseenter",(function(){e._autoplay("stop")})),this._el.addEventListener("mouseleave",(function(){e._autoplay()})),this._config.refresh&&window.addEventListener("resize",(function(){window.requestAnimationFrame(e._reset.bind(e))})),this._config.loop){var i=this;this._elItems.addEventListener("itcslider-start",(function(){i._isBalancing||(i._isBalancing=!0,window.requestAnimationFrame(i._balanceItems.bind(i)))})),this._elItems.addEventListener("transitionend",(function(){i._isBalancing=!1}))}var r=function(t){e._autoplay("stop");var i=0===t.type.search("touch")?t.touches[0]:t;e._swipeX=i.clientX,e._isSwiping=!0},s=function(t){if(e._isSwiping){var i=0===t.type.search("touch")?t.changedTouches[0]:t,r=e._swipeX-i.clientX;r>50?(e._direction="next",e._move()):r<-50&&(e._direction="prev",e._move()),e._isSwiping=!1,e._config.loop&&e._autoplay()}};this._config.swipe&&(this._el.addEventListener("touchstart",r),this._el.addEventListener("mousedown",r),document.addEventListener("touchend",s),document.addEventListener("mouseup",s)),this._el.addEventListener("dragstart",(function(t){t.preventDefault()})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState?e._autoplay("stop"):"visible"===document.visibilityState&&e._config.loop&&e._autoplay()}))}},{key:"_autoplay",value:function(t){var e=this;if(this._config.autoplay)return"stop"===t?(clearInterval(this._intervalId),void(this._intervalId=null)):void(null===this._intervalId&&(this._intervalId=setInterval((function(){e._direction="next",e._move()}),this._config.interval)))}},{key:"_balanceItems",value:function(){if(this._isBalancing){var t=this._elWrapper.getBoundingClientRect(),e=t.width/this._countActiveItems/2,i=this._elsItem.length;if("next"===this._direction){if(this._exItemMin.getBoundingClientRect().right<t.left-e){this._exItemMin.dataset.order=this._exOrderMin+i;var r=this._exTranslateMin+i*this._widthItem;this._exItemMin.dataset.translate=r,this._exItemMin.style.transform="translateX(".concat(r,"px)"),this._updateExProperties()}}else if(this._exItemMax.getBoundingClientRect().left>t.right+e){this._exItemMax.dataset.order=this._exOrderMax-i;var s=this._exTranslateMax-i*this._widthItem;this._exItemMax.dataset.translate=s,this._exItemMax.style.transform="translateX(".concat(s,"px)"),this._updateExProperties()}window.requestAnimationFrame(this._balanceItems.bind(this))}}},{key:"_changeActiveItems",value:function(){var e=this;this._stateItems.forEach((function(i,r){i?e._elsItem[r].classList.add(t.CLASS_ITEM_ACTIVE):e._elsItem[r].classList.remove(t.CLASS_ITEM_ACTIVE),e._elsIndicator.length&&i?e._elsIndicator[r].classList.add(t.CLASS_INDICATOR_ACTIVE):e._elsIndicator.length&&!i&&e._elsIndicator[r].classList.remove(t.CLASS_INDICATOR_ACTIVE)}))}},{key:"_move",value:function(){var e="next"===this._direction?-this._widthItem:this._widthItem,i=this._transform+e;if(!this._config.loop){var r=this._widthItem*(this._elsItem.length-this._countActiveItems);if(i<-r||i>0)return;this._btnPrev&&(this._btnPrev.classList.remove(t.CLASS_CONTROL_HIDE),this._btnNext.classList.remove(t.CLASS_CONTROL_HIDE)),this._btnPrev&&i===-r?this._btnNext.classList.add(t.CLASS_CONTROL_HIDE):this._btnPrev&&0===i&&this._btnPrev.classList.add(t.CLASS_CONTROL_HIDE)}"next"===this._direction?this._stateItems=_toConsumableArray(this._stateItems.slice(-1)).concat(_toConsumableArray(this._stateItems.slice(0,-1))):this._stateItems=_toConsumableArray(this._stateItems.slice(1)).concat(_toConsumableArray(this._stateItems.slice(0,1))),this._changeActiveItems(),this._transform=i,this._elItems.style.transform="translateX(".concat(i,"px)"),this._elItems.dispatchEvent(new CustomEvent("itcslider-start",{bubbles:!0}))}},{key:"_moveTo",value:function(t){var e=this._stateItems.reduce((function(e,i,r){var s=i?t-r:e;return Math.abs(s)<Math.abs(e)?s:e}),this._stateItems.length);if(0!==e){this._direction=e>0?"next":"prev";for(var i=0;i<Math.abs(e);i++)this._move()}}},{key:"_setInitialValues",value:function(){var e=this;if(this._transform=0,this._stateItems=[],this._isBalancing=!1,this._widthItem=this._elsItem[0].getBoundingClientRect().width,this._widthWrapper=this._elWrapper.getBoundingClientRect().width,this._countActiveItems=Math.round(this._widthWrapper/this._widthItem),this._elsItem.forEach((function(t,i){t.dataset.index=i,t.dataset.order=i,t.dataset.translate=0,t.style.transform="",e._stateItems.push(i<e._countActiveItems?1:0)})),this._config.loop){var i=this._elsItem.length-1,r=-(i+1)*this._widthItem;this._elsItem[i].dataset.order=-1,this._elsItem[i].dataset.translate=r,this._elsItem[i].style.transform="translateX(".concat(r,"px)"),this._updateExProperties()}else this._btnPrev&&this._btnPrev.classList.add(t.CLASS_CONTROL_HIDE);this._changeActiveItems(),this._autoplay()}},{key:"_reset",value:function(){var e=this,i=this._elsItem[0].getBoundingClientRect().width,r=this._elWrapper.getBoundingClientRect().width,s=Math.round(r/i);i===this._widthItem&&s===this._countActiveItems||(this._autoplay("stop"),this._elItems.classList.add(t.TRANSITION_OFF),this._elItems.style.transform="translateX(0)",this._setInitialValues(),window.requestAnimationFrame((function(){e._elItems.classList.remove(t.TRANSITION_OFF)})))}},{key:"_updateExProperties",value:function(){var t,e,i=Object.values(this._elsItem).map((function(t){return t})),r=i.map((function(t){return Number(t.dataset.order)}));this._exOrderMin=(t=Math).min.apply(t,_toConsumableArray(r)),this._exOrderMax=(e=Math).max.apply(e,_toConsumableArray(r));var s=r.indexOf(this._exOrderMin),n=r.indexOf(this._exOrderMax);this._exItemMin=i[s],this._exItemMax=i[n],this._exTranslateMin=Number(this._exItemMin.dataset.translate),this._exTranslateMax=Number(this._exItemMax.dataset.translate)}},{key:"next",value:function(){this._direction="next",this._move()}},{key:"prev",value:function(){this._direction="prev",this._move()}},{key:"moveTo",value:function(t){this._moveTo(t)}},{key:"reset",value:function(){this._reset()}}],[{key:"createInstances",value:function(){var e=this;document.querySelectorAll('[data-slider="itc-slider"]').forEach((function(i){var r=e;if(!e.contains.find((function(t){return t.el===i}))){var s=i.dataset,n={};Object.keys(s).forEach((function(t){if("slider"!==t){var e=s[t];e="false"!==(e="true"===e||e)&&e,e=Number.isNaN(Number(e))?Number(e):e,n[t]=e}})),e.contains.push({el:i,slider:new t(i,n)}),i.dataset.sliderId=e.contains.length,i.querySelectorAll(".slider__control").forEach((function(t){t.dataset.sliderTarget=r.contains.length}))}}))}}]),t}();_defineProperty(ItcSlider,"CLASS_CONTROL","slider__control"),_defineProperty(ItcSlider,"CLASS_CONTROL_HIDE","slider__control_hide"),_defineProperty(ItcSlider,"CLASS_ITEM_ACTIVE","slider__item_active"),_defineProperty(ItcSlider,"CLASS_INDICATOR_ACTIVE","active"),_defineProperty(ItcSlider,"SEL_WRAPPER",".slider__wrapper"),_defineProperty(ItcSlider,"SEL_ITEM",".slider__item"),_defineProperty(ItcSlider,"SEL_ITEMS",".slider__items"),_defineProperty(ItcSlider,"SEL_PREV",'.slider__control[data-slide="prev"]'),_defineProperty(ItcSlider,"SEL_NEXT",'.slider__control[data-slide="next"]'),_defineProperty(ItcSlider,"SEL_INDICATOR",".slider__indicators>li"),_defineProperty(ItcSlider,"TRANSITION_OFF","slider_disable-transition"),_defineProperty(ItcSlider,"contains",[]),document.addEventListener("DOMContentLoaded",(function(){ItcSlider.createInstances()}));
//# sourceMappingURL=index.d4daa338.js.map
